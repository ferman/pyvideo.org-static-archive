





<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="../../static/bootstrap-3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../static/css/richard.css">
  <link rel="stylesheet" href="../../static/browserid/persona-buttons.css" />
  <link rel="search" type="application/opensearchdescription+xml" title="pyvideo.org search" href="../../search/xml">
  <title>pyvideo.org - Scalable Realtime Architectures in Python</title>
  <link rel="shortcut icon" type="image/x-icon" href="http://pyvideo.org/favicon.ico">

  
    <meta name="keywords" content="">
  
    <meta name="description" content="This talk will focus on you can readily implement highly scalable and fault tolerant realtime architectures, such as dashboards, using Python and tools like Storm, Kafka, and ZooKeeper. We will focus on two related aspects: composing reliable systems using at-least-once and idempotence semantics and how to partition for locality.">
  

  
</head>
<body>
  <input type='hidden' name='csrfmiddlewaretoken' value='DEhrCXO8g33mPB1YNZ7JRQq9NQMV9Bvc' />
  
<div id="browserid-info"
     style="display: none;"
     data-info="{&quot;loginUrl&quot;: &quot;/browserid/login/&quot;, &quot;requestArgs&quot;: {}, &quot;logoutUrl&quot;: &quot;/browserid/logout/&quot;, &quot;csrfUrl&quot;: &quot;/browserid/csrf/&quot;}">
</div>

  <a name="top"></a>
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="../../index.html">pyvideo.org</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="scalable-realtime-architectures-in-python.html#" class="dropdown-toggle" data-toggle="dropdown">
              Browse <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="../../category.html">Conferences/user groups</a></li>
              <li><a href="../../speaker/index.html">Speakers</a></li>
            </ul>
          </li>
        </ul>
        <form class="navbar-form navbar-left" role="search" action="../../search.1.html">
          <div class="form-group">
            <input type="hidden" name="models" value="videos.video">
            <input type="text" class="form-control" name="q" placeholder="Search" autofocus value="">
          </div>
        </form>
        

        <ul class="nav navbar-nav navbar-right">
          
            <li><div class="signin">

<a href="scalable-realtime-architectures-in-python.html#" data-next="/" class="browserid-login persona-button" >
	<span>Sign in</span>
</a>
</div></li>
          
        </ul>
      </div>
    </div>
  </nav>

  <div id="content" class="container">
    
      <div class="row">
        <div class="col-md-12">
          
            <div class="alert alert-info">
              <i class="icon-info-sign"></i> <strong>Sorry!</strong>
              <p>pyvideo is closing down at some point in 2016. <a href="http://bluesock.org/~willkg/blog/pyvideo/status_20160115.html">More details</a></p>
            </div>
          
        </div>
      </div>
    

    


<div class="row section" vocab="http://schema.org" typeof="VideoObject">
  <div id="videobox" class="col-md-12">
    
    <div class="clearfix">
      <div class="videobox-inner">
        
          
            <div class="amara-embed" data-height="480px" data-width="854px" data-url="http://www.youtube.com/watch?v=Iw0MwPL2FCU"></div>
          
        
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div id="videobox" class="col-md-8">
    <div class="section">
      <h3 class="centered" property="name">Scalable Realtime Architectures in Python</h3>
      <link property="thumbnailUrl" href="http://i.ytimg.com/vi/Iw0MwPL2FCU/hqdefault.jpg"/>
      <link property="sameAs" href="scalable-realtime-architectures-in-python.html"/>
    </div>

    

    
      <div class="section">
        <h4>Summary</h4>
        <div class="video-details-summary" property="description"><p>This talk will focus on you can readily implement highly scalable and fault tolerant realtime architectures, such as dashboards, using Python and tools like Storm, Kafka, and ZooKeeper. We will focus on two related aspects: composing reliable systems using at-least-once and idempotence semantics and how to partition for locality.</p></div>
        <meta property="caption" content="This talk will focus on you can readily implement highly scalable and fault tolerant realtime architectures, such as dashboards, using Python and tools like Storm, Kafka, and ZooKeeper. We will focus on two related aspects: composing reliable systems using at-least-once and idempotence semantics and how to partition for locality."/>
      </div>
    

    

    
      <div class="section">
        <h4>Description</h4>
        <div class="video-details-description"><p>Increasingly we are interested in implementing highly scalable and
fault tolerant realtime architectures such as the following:</p>
<ul>
<li>
<p>Realtime aggregation. This is the realtime analogue of working with
  batched map-reduce in systems like Hadoop.</p>
</li>
<li>
<p>Realtime dashboards. Continuously updated views on all your
  customers, systems, and the like, without breaking a sweat.</p>
</li>
<li>
<p>Realtime decision making. Given a set of input streams, policy on
  what you like to do, and models learned by machine learning, optimize a
  business process. One example includes autoscaling a set of servers.</p>
</li>
</ul>
<p>(We use realtime in the soft sense: systems that are continuously
computing on input streams of data and make a best effort to keep up;
it certainly does not imply hard realtime systems that strictly
bound their computation times.)</p>
<p>Obvious tooling for such implementations include Storm (for event
processing), Kafka (for queueing), and ZooKeeper (for tracking and
configuration). Such components, written respectively in Clojure
(Storm), Scala (Kafka), and Java (ZooKeeper), provide the desired
scalability and reliability. But what may not be so obvious at first
glance is that we can work with other languages, including Python, for
the application level of such architectures. (If so inclined, you can
also try reimplementing such components in Python, but why not use
something that's been proven to be robust?)</p>
<p>In fact Python is likely a better language for the app level, given
that it is concise, high level, dynamically typed, and has great
libraries. Not to mention fun to write code in! This is especially
true when we consider the types of tasks we need to write: they are
very much like the data transformations and analyses we would have
written of say a standard Unix pipeline. And no one is going to argue
that writing such a filter in say Java is fun, concise, or even
considerably faster in running time.</p>
<p>So let's look at how you might solve such larger problems. Given that
it was straightforward to solve a small problem, we might approach as
follows. Simply divide up larger problems in small one. For example,
perhaps work with one customer at a time. And if failure is an ever
present reality, then simply ensure your code retries, just like you
might have re-run your pipeline against some input files.</p>
<p>Unfortunately both require distributed coordination at scale. And
distributed coordination is challenging, especially for real systems,
that will break at scale. Just putting a box in your architecture
labeled <strong>"ZooKeeper"</strong> doesn't magically solve things, even if
ZooKeeper can be a very helpful part of an actual solution.</p>
<p>Enter the Storm framework. While Storm certainly doesn't solve all
problems in this space, it can support many different types of
realtime architectures and works well with Python. In particular,
Storm solves two key problems for you.</p>
<p><strong>Partitioning</strong>. Storm lets you partition streams, so you can break
down the size of your problem. But if the a node running your code
fails, Storm will restart it. Storm also ensures such topology
invariants as the number of nodes (spouts and bolts in Storm's lingo)
that are running, making it very easy to recover from such failures.</p>
<p>This is where the cleverness really begins. What can you do if you can
ensure that <strong>all the data</strong> you need for a given continuously updated
computation - what is the state of this customer's account?  - can be
put in <strong>exactly one place</strong>, then flow the supporting data through it
over time? We will look at how you can readily use such locality in
your own Python code.</p>
<p><strong>Retries</strong>. Storm tracks success and failure of events being
processed efficiently through a batching scheme and other
cleverness. Your code can then choose to retry as necessary. Although
Storm also supports exactly-once event processing semantics, we will
focus on the simpler model of at-least-once semantics. This means your
code must tolerate retry, or in a word, is idempotent. But this is
straightforward. We have often written code like the following:</p>
<pre><code>seen = set()
for record in stream:
    k = uniquifier(record)
    if k not in seen:
       seen.add(k)
       process(record)
</code></pre>
<p>Except of course that any such real usage has to ensure it doesn't
attempt to store all observations (first, download the Internet! ;),
but removes them by implementing some sort of window or uses data
structures like HyperLogLog, as we will discuss.</p>
<p>One more aspect of reliability we will discuss is how to compose
reliable systems out of reliable components; we will show how this
can be readily done with a real example of consuming Kafka and
tracking consumption progress in ZooKeeper.</p></div>
      </div>
    
  </div>

  <div class="col-md-4">
    <div id="sidebar" class="well">
      

      <dl>
        
        <dt>Category</dt>
        <dd>
          <a href="../../category/54/europython-2014.html">EuroPython 2014</a>
        </dd>

        <dt>Speakers</dt>
        <dd>
          
            <div><a href="../../speaker/199/jim-baker.html">Jim Baker</a></div>
            <meta property="author" content="Jim Baker"/>
          
        </dd>

        
          <dt>Language</dt>
          <dd>English
            <meta property="inLanguage" content="en"/>
          </dd>
        

        

        
          <dt>Recorded</dt>
          <dd>July 25, 2014
            <meta property="dateCreated" content="2014-07-25"/>
          </dd>
        

        
          <dt>Last updated</dt>
          <dd>July 31, 2014
            <meta property="dateModified" content="2014-07-31T01:07:46.122233"/>
            <meta property="datePublished" content="2014-07-31T01:07:46.122233"/>
          </dd>
        

        <dt>Video origin</dt>
        <dd>
          
            <a href="http://www.youtube.com/watch?v=Iw0MwPL2FCU" property="embedUrl">http://www.youtube.com/watch?v=Iw0MwPL2FCU</a>
          
        </dd>

        <dt>Download</dt>
        <dd>
          
            No downloadable files.
          
        </dd>

        
          <dt>Metadata</dt>
          <dd>
            <a href="../../api/v2/video/2948">JSON</a>
          </dd>
        

        <dt>Copyright/License Information</dt>
        <dd>
          
            http://creativecommons.org/licenses/by/3.0/
          
        </dd>

        <dt>Tags</dt>
        <dd>
          
            No tags
          
          <meta property="keywords" content="EuroPython 2014"/>
        </dd>
      </dl>
    </div>
  </div>
</div>


    
    <div id="footer">
      <a name="footer"></a>
      <div class="row">
        <div class="col-md-6">
          <p>pyvideo.org</p>
          <p>
            Run by Sheila Miguez and Will Kahn-Greene Questions,
            comments or concerns? Send an email to Will at willkg at
            bluesock dot org.</p>
          <p>
            Powered by <a href="https://github.com/pyvideo/richard">richard</a>.
          </p>
          <p>
            Hosting for the project is graciously provided by
            <a href="http://www.rackspace.com/cloud">Rackspace</a>.
          </p>
        </div>
        <div class="col-md-4">
          <ul class="unstyled">
            <li><a href="../../pages/about.html">About this site</a></li>
            <li><a href="../../stats/index.html">Site stats</a></li>
            <li><a href="http://github.com/pyvideo/pyvideo/issues/new">Report an issue</a></li>
            <li><a href="http://github.com/pyvideo/pyvideo/issues/new">Suggest a conference to add</a></li>
          </ul>
        </div>
        <div class="col-md-2">
          <a class="pull-right" href="scalable-realtime-architectures-in-python.html#top">Back to top</a>
        </div>
      </div>
    </div>
    

  </div>

  


  
  <script type="text/javascript" src="../../static/jquery-1.11.0/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="../../static/bootstrap-3.1.1/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://login.persona.org/include.js"></script>
<script type="text/javascript" src="../../static/browserid/api.js"></script>
<script type="text/javascript" src="../../static/browserid/browserid.js"></script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29832059-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <script type="text/javascript" src="http://amara.org/embedder-iframe"></script>
  <script type="text/javascript" src="../../static/videos/js/videos.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      // react to changes after page load
      $(window).on('hashchange', function() {
        updateVideoOffset('unisubs');
      });

      updateVideoOffset('unisubs');
    });
  </script>

</body>
</html>
